[{"content":"å‰è¨€ æœ¬æ–‡ä¼šä»‹ç»å¦‚ä½•åŸºäº Github Pages + Github Actions + Hugo æ­å»ºä¸ªäººåšå®¢ç½‘ç«™ï¼Œå®ƒä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ç‰¹æ€§ï¼š\n å…è´¹æ‰˜ç®¡ ç‰ˆæœ¬æ§åˆ¶ å…¨è‡ªåŠ¨éƒ¨ç½² Markdownè¯­æ³•æ”¯æŒ ä¸ªæ€§åŒ–ä¸»é¢˜ æ”¯æŒè‡ªå®šä¹‰åŸŸå  å‰ç½®çŸ¥è¯†  Gitï¼ˆç†Ÿæ‚‰ï¼‰ GitHubï¼ˆäº†è§£ï¼‰ Markdownï¼ˆäº†è§£ï¼‰ HTML\u0026amp;CSSï¼ˆäº†è§£ï¼‰  å¿…å¤‡æ¡ä»¶  Github è´¦æˆ·  æ•ˆæœå±•ç¤ºï¼šhttps://hughxia.github.io\né¡¹ç›®åœ°å€ï¼šhttps://github.com/hughxia/hughxia.github.io\nåˆ›å»º GitHub Pages ç«™ç‚¹  Github Pages é€‚ç”¨äºå…·æœ‰ GitHub Free å’Œç»„ç»‡çš„ GitHub Free çš„å…¬å…±ä»“åº“ï¼Œä»¥åŠå…·æœ‰ GitHub Proã€GitHub Teamã€GitHub Enterprise Cloud å’Œ GitHub Enterprise Server çš„å…¬å…±å’Œç§æœ‰ä»“åº“ã€‚\n Github Pages å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä»ç‰¹å®šçš„ GitHub Repo ç”Ÿæˆé™æ€ç«™ç‚¹ã€‚è¿™é‡Œæˆ‘ä»¬å‚ç…§Github Pages å®˜æ–¹æ–‡æ¡£åˆ›å»ºå±äºä½ çš„ä¸ªäººç«™ç‚¹ã€‚\nåˆ›å»ºä»“åº“ é¦–å…ˆæ–°å»ºä¸€ä¸ª Repositoryï¼ŒRepository name æ ¹æ® Owner çš„ä¸åŒï¼Œåå­—è¦æ±‚åˆ†åˆ«ä¸º \u0026lt;user\u0026gt;.github.io æˆ– \u0026lt;organization\u0026gt;.github.io æ ¼å¼ã€‚å› ä¸ºæ˜¯ä¸ªäººåšå®¢ï¼Œæˆ‘ä»¬ä½¿ç”¨è‡ªå·±çš„ç”¨æˆ·åã€‚\næŸ¥çœ‹è®¾ç½® å½“åˆ›å»ºå®Œæˆåï¼Œå°±å¯ä»¥åœ¨ Github Repository é¡µä¸­çœ‹åˆ°åˆšåˆšåˆ›å»ºçš„ \u0026lt;user\u0026gt;.github.io ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ­¤ Repo ä¸Šæ–¹çš„ Settings èœå•ä¸­çš„ Pages é¡µï¼Œè¿›è¡Œç›¸å…³è®¾ç½®ã€‚  Setting \nåœ¨ Source é¡¹ä¸­å¯ä»¥é…ç½®ç«™ç‚¹çš„å‘å¸ƒæºï¼Œé»˜è®¤åº”ä¸º main åˆ†æ”¯çš„æ ¹ç›®å½•ã€‚å›¾ä¸­æˆ‘è®¾ç½®ä¸ºäº† gh-pages åˆ†æ”¯ï¼ŒåŸå› åé¢å†è®²ã€‚\nåœ¨ Custom domain é¡¹åˆ™å¯ä»¥é…ç½®è‡ªå®šä¹‰åŸŸåï¼Œå¹¶å¯ç”¨HTTPSã€‚\nä½¿ç”¨ Hugo ç”Ÿæˆåšå®¢æ¡†æ¶  Hugo is one of the most popular open-source static site generators. With its amazing speed and flexibility, Hugo makes building websites fun again.\n è¦æ­å»ºå®Œæ•´çš„ Blog è¿˜éœ€è¦åšå®¢ç”Ÿæˆå™¨çš„å¸®åŠ©ã€‚ç›®å‰ä¸»æµçš„ä¸‰å¤§å·¥å…·åˆ†åˆ«ä¸ºHugoï¼ŒJekyllå’ŒHexoã€‚å…¶ä¸­Hugoçš„ ğŸŒŸ æœ€å¤šï¼Œç¼–è¯‘é€Ÿåº¦ä¹Ÿæœ€å¿«ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰ç”¨å®ƒæ¥åšç¤ºä¾‹ã€‚\nå®‰è£…Hugo MacOS å’Œ Linux ç³»ç»Ÿéƒ½å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œè¿›è¡Œå®‰è£…ï¼ŒWindows ç³»ç»Ÿçš„å®‰è£…å¯ä»¥å‚ç…§å®˜æ–¹æ–‡æ¡£ã€‚è¿™é‡Œä»¥ Ubuntu20.04 ä¸ºä¾‹ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥å®‰è£…å‘½ä»¤ï¼š\napt install hugo å®‰è£…å®Œæˆåï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œç¡®è®¤ï¼š\nhugo version æ–°å»ºç«™ç‚¹ è¿›å…¥ä¸Šé¢åˆ›å»ºçš„ \u0026lt;user\u0026gt;.github.io é¡¹ç›®è·¯å¾„ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ŒHugoä¼šåœ¨å½“å‰è·¯å¾„åˆ›å»ºç«™ç‚¹æ¡†æ¶ã€‚é»˜è®¤é…ç½®æ–‡ä»¶æ ¼å¼ä¸º TOML æ ¼å¼ï¼Œå¯ä»¥é€šè¿‡ -f yaml å‚æ•°ä¿®æ”¹ä¸ºæˆ‘ä»¬ç†Ÿæ‚‰çš„ YAML æ ¼å¼ã€‚\nhugo new site . -f yaml é€‰æ‹©ä¸»é¢˜ å®˜æ–¹ä¸»é¢˜é¡µæœ‰ä¸°å¯Œçš„ä¸»é¢˜å¯ä¾›é€‰æ‹©ï¼Œä¸‹é¢ä»¥æˆ‘ç›®å‰ä½¿ç”¨çš„ hugo-theme-stack ä¸ºä¾‹ã€‚\nè¿™é‡Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Git Submodule æœºåˆ¶å°†ä¸»é¢˜ä»“åº“å…‹éš†ä¸‹æ¥ï¼š\ngit submodule add https://github.com/htdvisser/hugo-theme-stack.git themes/hugo-theme-stack æ³¨æ„ï¼š å½“æˆ‘ä»¬ä½¿ç”¨ git clone å‘½ä»¤æ‹‰å–è¿œç¨‹ä»“åº“çš„æ—¶å€™ï¼Œé»˜è®¤ä¸ä¼šæ‹‰å–å­æ¨¡å—ä»£ç ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ  --recurse-submodules å‚æ•°æ¥æ‹‰å–ã€‚ æˆ–è€…åœ¨ä¸»é¡¹ç›®ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\ngit submodule update --remote --merge ç¼–è¾‘é…ç½® åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹å¯ä»¥æ‰¾åˆ° config.yaml æ–‡ä»¶ï¼Œè¿™æ˜¯æ•´ä¸ªHugoé¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¿®æ”¹ baseurl , languageCode , title å’Œ theme è¿™å‡ ä¸ªå­—æ®µå®ŒæˆåŸºæœ¬é…ç½®ã€‚ä¸»é¢˜å¾€å¾€éƒ½ä¼šæä¾›ä¸°å¯Œçš„è‡ªå®šä¹‰é…ç½®ï¼Œå¯ä»¥è‡ªè¡ŒæŸ¥é˜…é¡¹ç›®æ–‡æ¡£ã€‚\nbaseurl:https://hughxia.github.io/languageCode:zh-cntheme:hugo-theme-stacktitle:Hugh\u0026#39;s Blogåˆ›å»ºæ–‡ç«  æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ç¯‡æ–‡ç« ï¼š\nhugo new post/first-post.md Hugoä¼šåœ¨ Markdown æ–‡ä»¶å¤´éƒ¨ä»¥é…ç½®æ–‡ä»¶ç›¸åŒè¯­æ³•çš„å½¢å¼æ·»åŠ ä¸€äº› Meta ä¿¡æ¯ï¼Œæˆ‘ä»¬åœ¨åˆ†éš”çº¿ --- ä¸‹æ–¹è¿›è¡Œæ–‡ç« å†…å®¹çš„ç¼–è¾‘ã€‚\næœ¬åœ°é¢„è§ˆ å¯åŠ¨ hugo serverï¼Œå³å¯åœ¨æœ¬åœ°http://localhost:1313è¿›è¡Œé¢„è§ˆã€‚\nhugo server -D å…¶ä¸­ -D å‚æ•°æŒ‡ä¼šæ¸²æŸ“è‰ç¨¿ï¼Œé€šè¿‡ hugo new posts å‘½ä»¤åˆ›å»ºå‡ºæ¥çš„æ–‡ç« é¡¶éƒ¨Metaä¿¡æ¯ä¸­é»˜è®¤draftè®¾ç½®ä¸º true ï¼Œå½“ç¼–è¾‘å®Œæˆå‡†å¤‡æ­£å¼å‘å¸ƒæ—¶ï¼Œéœ€è¦å°†å…¶æ”¹ä¸º falseã€‚\né€šè¿‡ Github Actions è‡ªåŠ¨éƒ¨ç½²  åœ¨ GitHub Actions çš„ä»“åº“ä¸­è‡ªåŠ¨åŒ–ã€è‡ªå®šä¹‰å’Œæ‰§è¡Œè½¯ä»¶å¼€å‘å·¥ä½œæµç¨‹ã€‚ æ‚¨å¯ä»¥å‘ç°ã€åˆ›å»ºå’Œå…±äº«æ“ä½œä»¥æ‰§è¡Œæ‚¨å–œæ¬¢çš„ä»»ä½•ä½œä¸šï¼ˆåŒ…æ‹¬ CI/CDï¼‰ï¼Œå¹¶å°†æ“ä½œåˆå¹¶åˆ°å®Œå…¨è‡ªå®šä¹‰çš„å·¥ä½œæµç¨‹ä¸­ã€‚\n éƒ¨ç½²é—®é¢˜ ç°åœ¨å¯ä»¥é€šè¿‡ hugo å‘½ä»¤åœ¨ public æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆæœ€ç»ˆé¡µé¢ã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªæ–‡ä»¶å¤¹ä¹ŸåŠ å…¥åˆ°Gitçš„ç‰ˆæœ¬æ§åˆ¶ï¼Œç„¶åé€šè¿‡åœ¨ä¸Šè¿° Settings é¡µä¸­å°†å‘å¸ƒæºæ”¹ä¸º public æ¥å®Œæˆéƒ¨ç½²ã€‚\nä¸è¿‡ï¼Œè¿™éœ€è¦æˆ‘ä»¬æ¯æ¬¡åœ¨å®Œæˆæ–‡ç« åˆ›ä½œï¼ŒåŒæ­¥è‡³ Github ä¹‹å‰éƒ½éœ€è¦ä¸»åŠ¨ç”Ÿæˆ public æ–‡ä»¶å¤¹ï¼Œè¿™æ ·ä¸ä»…éº»çƒ¦è€Œä¸”ä¼šåœ¨æˆ‘ä»¬å½“å‰çš„ä»“åº“ä¸­å¢åŠ å¾ˆå¤šå†—ä½™æ–‡ä»¶ã€‚å¥½åœ¨ Github å®˜æ–¹æ¨å‡ºäº† CI åˆ©å™¨ï¼šGithub Actionsï¼Œé€šè¿‡å®ƒå¯ä»¥å®Œç¾åœ°è§£å†³ä¸Šè¿°é—®é¢˜ã€‚\nåŸºæœ¬æ¦‚å¿µ  å·¥ä½œæµç¨‹ï¼ˆworkflowï¼‰: å·¥ä½œæµç¨‹æ˜¯æ‚¨æ·»åŠ åˆ°ä»“åº“çš„è‡ªåŠ¨åŒ–è¿‡ç¨‹ã€‚ äº‹ä»¶ï¼ˆeventï¼‰: äº‹ä»¶æ˜¯è§¦å‘å·¥ä½œæµç¨‹çš„ç‰¹å®šæ´»åŠ¨ã€‚ ä½œä¸šï¼ˆjobï¼‰: ä½œä¸šæ˜¯åœ¨åŒä¸€è¿è¡ŒæœåŠ¡å™¨ä¸Šæ‰§è¡Œçš„ä¸€ç»„æ­¥éª¤ã€‚ æ­¥éª¤ï¼ˆstepï¼‰: æ­¥éª¤æ˜¯å¯ä»¥åœ¨ä½œä¸šä¸­è¿è¡Œå‘½ä»¤çš„å•ä¸ªä»»åŠ¡ã€‚ æ“ä½œï¼ˆactionï¼‰: æ“ä½œæ˜¯ç‹¬ç«‹å‘½ä»¤ï¼Œå®ƒä»¬ç»„åˆåˆ°æ­¥éª¤ä»¥åˆ›å»ºä½œä¸šã€‚  CIé…ç½® åœ¨ Github çš„ Repo é¡µä¸Šæ–¹æˆ‘ä»¬å¯ä»¥çœ‹åˆ° Actions èœå•ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°åˆ›å»ºä¸€ä¸ª Workflow ï¼Œä¸‹é¢æ˜¯æˆ‘çš„é…ç½®ï¼š\nname:CI# Controls when the workflow will runon:# Triggers the workflow on push or pull request events but only for the main branchpush:branches:[main]pull_request:branches:[main]# Allows you to run this workflow manually from the Actions tabworkflow_dispatch:# A workflow run is made up of one or more jobs that can run sequentially or in paralleljobs:# This workflow contains a single job called \u0026#34;build\u0026#34;deploy:# The type of runner that the job will run onruns-on:ubuntu-latest# Steps represent a sequence of tasks that will be executed as part of the jobsteps:- name:Git checkoutuses:actions/checkout@v2with:submodules:true# Fetch Hugo themes (true OR recursive)fetch-depth:0# Fetch all history for .GitInfo and .Lastmod- name:Setup Hugo# You may pin to the exact commit or the version.# uses: peaceiris/actions-hugo@2e89aa66d0093e4cd14751b3028fc1a179452c2euses:peaceiris/actions-hugo@v2.4.13with:hugo-version:\u0026#34;0.84.4\u0026#34;# Runs a single command using the runners shell- name:Buildrun:hugo --minify- name:Deployuses:peaceiris/actions-gh-pages@v3if:github.ref == \u0026#39;refs/heads/main\u0026#39;with:github_token:${{ secrets.GITHUB_TOKEN }}publish_dir:./publicä¸Šè¿°é…ç½®çš„æ„æ€æ˜¯æˆ‘ä»¬ä¼šåœ¨æ¯æ¬¡ push ä»£ç è‡³ main åˆ†æ”¯çš„æ—¶ï¼Œåœ¨æœ€æ–°çš„ Ubuntu ç³»ç»Ÿç¯å¢ƒä¸‹ä¾æ¬¡å®Œæˆä»¥ä¸‹æ“ä½œï¼š\n  å°† main åˆ†æ”¯æœ€æ–°ä»£ç æ£€å‡º\n  å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ hugo\n  é€šè¿‡ hugo --minify ä»¥æœ€å°åŒ–çš„æ–¹å¼æ‰“åŒ…ç½‘é¡µè‡³ public æ–‡ä»¶\n  å°†æ‰“åŒ…åçš„æ–‡ä»¶å¤¹æ¨é€è‡³å½“å‰ä»“åº“çš„ gh-pages åˆ†æ”¯\n  è¿˜è®°å¾—ä¸Šé¢åœ¨ Pages å›¾ç‰‡ä¸­çš„é…ç½®å§ï¼Œè¿™æ—¶å€™ Github Pages å°±ä¼šä» gh-pages åˆ†æ”¯çš„æ ¹ç›®å½•ç”Ÿæˆæœ€ç»ˆçš„ç½‘é¡µã€‚å¯ä»¥åœ¨ Actions é¡µæŸ¥çœ‹ Job çš„æ‰§è¡Œæƒ…å†µã€‚å½“æ‰§è¡Œå®Œæˆåï¼Œä¸€èˆ¬ç­‰å¾… 1 ~ 3 åˆ†é’Ÿï¼Œå°±å¯ä»¥åœ¨è‡ªå·±çš„åšå®¢ç½‘ç«™çœ‹åˆ°æœ€æ–°æäº¤çš„å†…å®¹äº†ã€‚\nåè®° é€šè¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å®Œæˆäº†ä¸€ä¸ªå±äºä½ è‡ªå·±çš„åšå®¢ç½‘ç«™çš„æ­å»ºï¼ˆåˆ«å¿˜äº†å®šåˆ¶ä½ çš„ä¸ªæ€§åŒ–ä¸»é¢˜å“Ÿ~ï¼‰ï¼Œæ¥ä¸‹æ¥å°±éšå¿ƒæ‰€æ¬²åœ°å¼€å§‹ä½ çš„å†…å®¹åˆ›ä½œå§ã€‚\n","date":"2021-07-11T00:16:41+08:00","image":"https://hughxia.github.io/p/github-based-blog-guide/github_hu49a75afa8dde1d5fada982f45f8559d5_29074_120x120_fill_box_smart1_2.png","permalink":"https://hughxia.github.io/p/github-based-blog-guide/","title":"åŸºäºGithubæ­å»ºåšå®¢æŒ‡å—"}]